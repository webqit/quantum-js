(()=>{var fe=Object.defineProperty;var Pe=(e,t,r)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ct=(e,t)=>{for(var r in t)fe(e,r,{get:t[r],enumerable:!0})};var U=(e,t,r)=>(Pe(e,typeof t!="symbol"?t+"":t,r),r);var ne={};Ct(ne,{AsyncLiveFunction:()=>ir,AsyncLiveScript:()=>bt,LiveFunction:()=>nr,LiveMode:()=>Q,LiveModule:()=>wt,LiveScript:()=>or,Observer:()=>b,compile:()=>ve,matchPrologDirective:()=>be,nextKeyword:()=>we,parse:()=>At,serialize:()=>jt,transform:()=>Tt});var Qt={};Ct(Qt,{any:()=>Be,apply:()=>Kt,batch:()=>Yt,construct:()=>Vt,defineProperties:()=>He,defineProperty:()=>ht,deleteProperties:()=>Ze,deleteProperty:()=>mt,get:()=>z,getOwnPropertyDescriptor:()=>$t,getOwnPropertyDescriptors:()=>Ke,getPrototypeOf:()=>Ut,has:()=>Et,intercept:()=>Ve,isExtensible:()=>Wt,map:()=>Ge,observe:()=>Jt,ownKeys:()=>Bt,path:()=>Ue,preventExtensions:()=>Ht,reduce:()=>Zt,set:()=>J,setPrototypeOf:()=>Gt,subtree:()=>We});function S(e){return!Array.isArray(e)&&typeof e=="object"&&e}function it(e){return typeof e}function D(e){return Array.isArray(e)}function ot(e){return typeof e=="function"}function Dt(e){return e===null||e===""}function G(e){return arguments.length&&(e===void 0||typeof e>"u")}function E(e){return Array.isArray(e)||typeof e=="object"&&e||ot(e)}function Mt(e){return Dt(e)||G(e)||e===!1||e===0||E(e)&&!Object.keys(e).length}function L(e){return ot(e)||e&&{}.toString.call(e)==="[object function]"}function _t(e){return e instanceof String||typeof e=="string"&&e!==null}function Ft(e){return!_t(e)&&!G(e.length)}function Ot(e,...t){if(!e||!["object","function"].includes(typeof e))throw new Error("Argument #1 must be of type object");let r=e[Symbol.for("wq")];if(r||(r=new vt,Object.defineProperty(e,Symbol.for("wq"),{value:r,enumerable:!1,configurable:!1,writable:!1})),!t.length)return r;let n,i;for(;n=t.shift();)(i=r)&&!(r=r.get(n))&&(r=new vt,i.set(n,r));return r}var vt=class extends Map{};function W(e,t=!0){return D(e)?e:!t&&S(e)?[e]:e!==!1&&e!==0&&Mt(e)?[]:Ft(e)?Array.prototype.slice.call(e):S(e)?Object.values(e):[e]}var v=(e,...t)=>Ot(e,"observerAPI",...t),st=(e,t)=>e instanceof Promise?e.then(t):t(e),Pt={};var H=class{constructor(t,r){this.registry=t,Object.assign(this,{...r,target:t.target}),this.params.signal&&this.params.signal.addEventListener("abort",()=>this.remove())}remove(){return this.removed=!0,this.registry.removeRegistration(this)}};var ct=class extends H{constructor(){super(...arguments),this.emit.currentRegistration=this,Object.defineProperty(this,"abortController",{value:new AbortController}),Object.defineProperty(this,"signal",{value:this.abortController.signal}),Pt.setMaxListeners?.(0,this.signal)}remove(){this.abortController.abort(),super.remove()}fire(t){if(this.emit.recursionTarget&&!["inject","force-async","force-sync"].includes(this.params.recursions))return;let r=t,n=this.filter;if(n!==1/0&&(n=W(n,!1))&&(r=t.filter(o=>n.includes(o.key))),this.params.diff&&(r=r.filter(o=>o.type!=="set"||o.value!==o.oldValue)),!r.length)return;if(["inject","defer"].includes(this.params.recursions)){if(this.emit.recursionTarget){this.emit.recursionTarget.push(...r);return}this.emit.recursionTarget=this.params.recursions==="inject"?r:[]}let i=this.filter===1/0||Array.isArray(this.filter)?this.emit(r,this):this.emit(r[0],this);return st(i,o=>{let s=this.emit.recursionTarget;return delete this.emit.recursionTarget,this.params.recursions==="defer"&&s?.length?this.emit.currentRegistration.fire(s):o})}};var Z=class{constructor(t){this.target=t,this.entries=[]}addRegistration(t){return this.entries.push(t),t}removeRegistration(t){this.entries=this.entries.filter(r=>r!==t)}static _getInstance(t,r,n=!0,i=this.__namespace){if(!E(r))throw new Error(`Subject must be of type object; "${it(r)}" given!`);let o=this;return i&&v(globalThis,"observerAPI","namespaces").has(t+"-"+i)&&(o=v(globalThis,"observerAPI","namespaces").get(t+"-"+i),t+="-"+i),!v(r,"registry").has(t)&&n&&v(r,"registry").set(t,new o(r)),v(r,"registry").get(t)}static _namespace(t,r,n=null){if(t+="-"+r,arguments.length===2)return v(globalThis,"observerAPI","namespaces").get(t);if(!(n.prototype instanceof this))throw new Error(`The implementation of the namespace ${this.name}.${r} must be a subclass of ${this.name}.`);v(globalThis,"observerAPI","namespaces").set(t,n),n.__namespace=r}};var P=class{constructor(t,r){if(this.target=t,!r.operation)throw new Error("Descriptor operation must be given in definition!");Object.assign(this,r)}};var q=class extends Z{static getInstance(t,r=!0,n=null){return super._getInstance("listeners",...arguments)}static namespace(t,r=null){return super._namespace("listeners",...arguments)}constructor(t){super(t),this.batches=[]}addRegistration(t,r,n){return super.addRegistration(new ct(this,{filter:t,emit:r,params:n}))}emit(t,{eventsArePropertyDescriptors:r=!1,eventIsArrayMethodDescriptor:n=!1}={}){if(this.batches.length){let i=this.batches[0].params.arrayMethodName;this.batches[0].snapshots.push({events:[...t],arrayMethodName:i,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n});return}this.$emit(this.entries,[{events:t,eventsArePropertyDescriptors:r,eventIsArrayMethodDescriptor:n}])}$emit(t,r){let n=0,i=0,o=0;for(let c of t)n+=1,c.params.withPropertyDescriptors&&(i+=1),c.params.withArrayMethodDescriptors&&(o+=1);let s=[],a=[],f=[],u=[];for(let c of r){let l=c.arrayMethodName,p=c.eventsArePropertyDescriptors,_=c.eventIsArrayMethodDescriptor;for(let h of c.events)if(l&&(h.operation=l),i&&(o&&s.push(h),_||o!==n&&a.push(h)),i!==n){let w=h;if(p){let{target:x,type:d,...y}=h;w=new P(x,{type:"set",...y}),Object.defineProperty(w,"value","get"in y.value?{get:()=>y.value.get()}:{value:y.value.value}),y.oldValue&&Object.defineProperty(w,"oldValue","get"in y.oldValue?{get:()=>y.oldValue.get()}:{value:y.oldValue.value})}o&&f.push(w),_||o!==n&&u.push(w)}}for(let c of t)c.params.withPropertyDescriptors?c.params.withArrayMethodDescriptors?s.length&&c.fire(s):a.length&&c.fire(a):c.params.withArrayMethodDescriptors?f.length&&c.fire(f):u.length&&c.fire(u)}batch(t,r={}){this.batches.unshift({entries:[...this.entries],snapshots:[],params:r});let n=t();return st(n,i=>{let o=this.batches.shift();return o.snapshots.length&&this.$emit(o.entries,o.snapshots),i})}};var lt=class extends H{exec(t,r,n){return this.running||!this.traps[t.operation]?r(...Array.prototype.slice.call(arguments,2)):(this.running=!0,this.traps[t.operation](t,n,(...i)=>(this.running=!1,r(...i))))}};var N=class extends Z{static getInstance(t,r=!0,n=null){return super._getInstance("traps",...arguments)}static namespace(t,r=null){return super._namespace("traps",...arguments)}addRegistration(t){return super.addRegistration(new lt(this,t))}emit(t,r=null){let n=this;return function i(o,...s){let a=n.entries[o];return a?a.exec(t,(...f)=>i(o+1,...f),...s):r?r(t,...s):s[0]}(0)}};var zt={};Ct(zt,{accessorize:()=>Ne,proxy:()=>qt,unaccessorize:()=>ze,unproxy:()=>pt});var de=Symbol("wqOriginal");function Ne(e,t,r={}){e=Nt(e);let n=v(e,"accessorizedProps");function i(f){let u,c=e;do u=Object.getOwnPropertyDescriptor(c,f);while(!u&&(c=Object.getPrototypeOf(c)));return u?{proto:c,descriptor:u}:{descriptor:{value:void 0,configurable:!0,enumerable:!0,writable:!0}}}function o(f){if(n.has(f+""))return!0;let u=i(f);u.getValue=function(p=!1){return p?this.descriptor:this.descriptor.get?this.descriptor.get():this.descriptor.value},u.setValue=function(p,_=!1){if(this.dirty=!0,_){this.descriptor=p;return}return this.descriptor.set?this.descriptor.set(p)!==!1:(this.descriptor.value=p,!0)},u.intact=function(){let p=Object.getOwnPropertyDescriptor(e,f);return p?.get===l.get&&p?.set===l.set&&n.get(f+"")===this},u.restore=function(){return this.intact()?(this.proto&&this.proto!==e||!this.proto&&!this.dirty?delete e[f]:Object.defineProperty(e,f,this.descriptor),n.delete(f+""),!0):!1},n.set(isNaN(f)?f:parseInt(f),u);let{enumerable:c=!0}=u.descriptor,l={enumerable:c,configurable:!0};("value"in u.descriptor||u.descriptor.set)&&(l.set=function(p){return J(this,f,p,r)}),("value"in u.descriptor||u.descriptor.get)&&(l.get=function(){return z(this,f,r)});try{return Object.defineProperty(e,f,l),!0}catch{return n.delete(f+""),!1}}let a=(Array.isArray(t)?t:t===void 0?Object.keys(e):[t]).map(o);return t===void 0||Array.isArray(t)?a:a[0]}function ze(e,t,r={}){e=Nt(e);let n=v(e,"accessorizedProps");function i(a){return n.has(a+"")?n.get(a+"").restore():!0}let s=(Array.isArray(t)?t:t===void 0?Object.keys(e):[t]).map(i);return t===void 0||Array.isArray(t)?s:s[0]}function qt(e,t={},r=void 0){let n=Nt(e);if(typeof t.membrane=="boolean")throw new Error("The params.membrane parameter cannot be of type boolean.");if(t.membrane&&v(n,"membraneRef").has(t.membrane))return v(n,"membraneRef").get(t.membrane);let i={apply:(a,f,u)=>Kt(a,f,u,void 0,t),construct:(a,f,u=null)=>Vt(a,f,u,t),defineProperty:(a,f,u)=>ht(a,f,u,t),deleteProperty:(a,f)=>mt(a,f,t),get:(a,f,u=null)=>{if(f===de)return n;let c={...t,receiver:u},l=z(a,f,c);return Array.isArray(a)&&typeof l=="function"&&!/^class\s?/.test(Function.prototype.toString.call(l))?qt(l,{...t,arrayMethodName:f,membrane:u},r):t.chainable&&E(l)&&f!=="prototype"&&!(typeof l=="function"&&/^class\s?|\{\s\[native\scode\]\s\}$/.test(Function.prototype.toString.call(l)))?qt(l,t,r):l},getOwnPropertyDescriptor:(a,f)=>$t(a,f,t),getPrototypeOf:a=>Ut(a,t),has:(a,f)=>Et(a,f,t),isExtensible:a=>Wt(a,t),ownKeys:a=>Bt(a,t),preventExtensions:a=>Ht(a,t),set:(a,f,u,c=null)=>J(a,f,u,{...t,receiver:c}),setPrototypeOf:(a,f)=>Gt(a,f,t)},o=r?.(i)||i,s=new Proxy(n,o);return t.membrane&&v(n,"membraneRef").set(t.membrane,s),s}function pt(e){return e&&e[de]||e}function Nt(e){if(!e||!E(e))throw new Error("Target must be of type object!");return pt(e)}var dt=class extends Array{};function Ue(...e){return new dt(...e)}var Y=class extends Array{};function We(){return new Y}function Be(){return 1/0}function Zt(e,t,r,n=o=>o,i={}){let o=t instanceof Y;if(!(!o&&!t?.length))return function s(a,f,u,c){let l=c||f[u.level]instanceof Y,p=l?1/0:f[u.level],_=l?!1:u.level===f.length-1;return a instanceof P&&a.operation!=="get"?u={...u,probe:"always"}:u.probe!=="always"&&(u={...u,probe:!_}),r(a,p,(h,...w)=>{let x=m=>{m instanceof P&&(m.path="key"in m?[m.key]:[],a instanceof P&&(m.path="key"in m?a.path.concat(m.key):a.path.slice(0),Object.defineProperty(m,"context",{get:()=>a,configurable:!0})))},d=w[0]||{},y=m=>{if(m instanceof P&&"argumentsList"in m)return;let $=F(m,!1);return st($,T=>(m instanceof P?m.value=T:m=T,s(m,f,{...u,...d,keyInParent:m.key,level:u.level+1},l)))};if(yt(p)&&Array.isArray(h)){if(h.forEach(x),_)return n(h,...w);l&&h[0]instanceof P&&(h[0].operation!=="get"||i.asGet)&&n(h,...w);for(let m of h)y(m);return}return x(h),_?n(h,...w):y(h)},u)}(e,t.slice(0),{...i,level:0},o)}function Jt(e,t,r,n={}){let i=F(e,!n.level);if(L(arguments[1])&&([,r,n={}]=arguments,t=1/0),!L(r))throw new Error(`Handler must be a function; "${it(r)}" given!`);if(t instanceof dt||t instanceof Y)return Zt(i,t,Jt,r,n);if(n={...n,descripted:!0},delete n.live,!E(i))return n.probe&&z(i,t,r,n)||void 0;let o=ye(i,t,r,n);return n.probe?z(i,t,o,n):o()}function Ve(e,t,r={}){let n=F(e);return S(t)||([,,,r={}]=arguments,t={[arguments[1]]:arguments[2]}),N.getInstance(n,!0,r.namespace).addRegistration({traps:t,params:r})}function $t(e,t,r=i=>i,n={}){return M(e,"getOwnPropertyDescriptor",{key:t},r,n)}function Ke(e,t,r=i=>i,n={}){return M(e,"getOwnPropertyDescriptors",{key:t},r,n)}function Ut(e,t=n=>n,r={}){return M(e,"getPrototypeOf",{},t,r)}function Wt(e,t=n=>n,r={}){return M(e,"isExtensible",{},t,r)}function Bt(e,t=n=>n,r={}){return M(e,"ownKeys",{},t,r)}function Et(e,t,r=i=>i,n={}){return M(e,"has",{key:t},r,n)}function z(e,t,r=i=>i,n={}){let i,o=F(e,!n.level);return S(r)?[n,r]=[r,s=>s]:n.live&&(i=!0),t instanceof dt||t instanceof Y?Zt(o,t,z,r,{...n,asGet:!0}):Je(o,t,s=>{let a=[...s];return function f(u,c,l){if(!c.length)return l(u);let p=c.shift();if(!["string","number","symbol"].includes(typeof p))throw new Error(`Property name/key ${p} invalid.`);function _(x,d=void 0){let y=T=>(x.value=T,f([...u,n.live||n.descripted?x:T],c,l));if(arguments.length>1)return y(d);if(!E(o))return y(o?.[x.key]);let m=v(o,"accessorizedProps",!1),$=m&&m.get(x.key);if($&&$.intact())return y($.getValue(n.withPropertyDescriptors));if(n.withPropertyDescriptors){let T=Object.getOwnPropertyDescriptor(o,x.key);return y(T)}return y(Reflect.get(o,x.key))}let h=new P(o,{type:"get",key:p,value:void 0,operation:"get",related:a});if(!E(o))return _(h);let w=N.getInstance(o,!1,n.namespace);return w?w.emit(h,_):_(h)}([],s.slice(0),f=>{let u=yt(t)?f:f[0];return i&&E(o)?ye(o,t,r,n,e.key)(u):r(u)})},n)}function Yt(e,t,r={}){let n=F(e);return q.getInstance(n,!0,r.namespace).batch(t,r)}function Ge(e,t,r={}){t=F(t),e=F(e);let n=(r.only||[]).slice(0),i=(r.except||[]).slice(0),o=Object.keys(r.spread?[...e]:e).map(u=>isNaN(u)?u:parseInt(u)),s=n.length?n.filter(u=>o.includes(u)):o.filter(u=>!i.includes(u)),a=u=>!Array.isArray(t)||isNaN(u)?u:u-i.filter(c=>c<u).length,f=u=>{let c=$t(e,u,r);"value"in c&&c.writable&&c.enumerable&&c.configurable?J(t,a(u),c.value,r):(c.enumerable||r.onlyEnumerable===!1)&&ht(t,u,{...c,configurable:!0},r)};return Yt(t,()=>{s.forEach(f)}),Jt(e,u=>{u.filter(c=>n.length?n.includes(c.key):!i.includes(c.key)).forEach(c=>{if(c.type==="delete")return mt(t,a(c.key),r);if(c.type==="def"){(c.value.enumerable||r.onlyEnumerable===!1)&&ht(t,a(c.key),{...c.value,configurable:!0},r);return}f(c.key)})},{...r,withPropertyDescriptors:!0})}function J(e,t,r,n=s=>s,i={},o=!1){let s=F(e),a=[[t,r]];S(t)&&([,,n=u=>u,i={},o=!1]=arguments,a=Object.entries(t)),S(n)&&([o,i,n]=[typeof i=="boolean"?i:o,n,u=>u]);let f=a.map(([u])=>u);return function u(c,l,p){if(!l.length)return p(c);let[_,h]=l.shift();function w(d,y=void 0){let m=B=>(d.status=B,u(c.concat(d),l,p));if(arguments.length>1)return m(d,y);let $=v(s,"accessorizedProps",!1),T=$&&$.get(d.key);return d.type==="def"?(T&&!T.restore()&&m(!1),Object.defineProperty(s,d.key,d.value),m(!0)):T&&T.intact()?m(T.setValue(d.value)):m(Reflect.set(s,d.key,d.value))}function x(d,y){if(i.diff&&h===y)return u(c,l,p);let m=new P(s,{type:o?"def":"set",key:_,value:h,isUpdate:d,oldValue:y,related:[...f],operation:o?"defineProperty":"set",detail:i.detail}),$=N.getInstance(s,!1,i.namespace);return $?$.emit(m,w):w(m)}return Et(s,_,d=>{if(!d)return x(d);if(_==="length"&&Array.isArray(s)&&v(s).has("$length"))return x(!0,v(s).get("$length"));let y={...i,withPropertyDescriptors:o};return z(s,_,m=>x(d,m),y)},i)}([],a.slice(0),u=>{let c=q.getInstance(s,!1,i.namespace);return c&&c.emit(u,{eventsArePropertyDescriptors:!!o}),n(yt(t)?u.map(l=>l.status):u[0]?.status)})}function ht(e,t,r,n=o=>o,i={}){return J(e,t,r,n,i,!0)}function He(e,t,r=i=>i,n={}){return J(e,t,r,n,!0)}function mt(e,t,r=i=>i,n={}){let i=F(e);S(r)&&([n,r]=[r,a=>a]);let o=W(t,!1),s=[...o];return function a(f,u,c){if(!u.length)return c(f);let l=u.shift();function p(h,w=void 0){let x=m=>(h.status=m,a(f.concat(h),u,c));if(arguments.length>1)return x(h,w);let d=v(i,"accessorizedProps",!1),y=d&&d.get(h.key);return y&&!y.restore()&&x(!1),x(Reflect.deleteProperty(i,h.key))}function _(h){let w=new P(i,{type:"delete",key:l,oldValue:h,related:[...s],operation:"deleteProperty",detail:n.detail}),x=N.getInstance(i,!1,n.namespace);return x?x.emit(w,p):p(w)}return z(i,l,_,n)}([],o.slice(0),a=>{let f=q.getInstance(i,!1,n.namespace);return f&&f.emit(a),r(yt(t)?a.map(u=>u.status):a[0].status)})}function Ze(e,t,r=i=>i,n={}){return mt(...arguments)}function Vt(e,t,r=null,n=o=>o,i={}){return M(e,"construct",arguments.length>2?{argumentsList:t,newTarget:r}:{argumentsList:t},n,i)}function Kt(e,t,r,n=o=>o,i={}){let o=pt(t),s;if(Array.isArray(t)){if(i.arrayMethodName){let a=new P(o,{operation:i.arrayMethodName,argumentsList:r});q.getInstance(o,!1,i.namespace)?.emit([a],{eventIsArrayMethodDescriptor:!0})}v(o).set("$length",o.length),s=Yt(o,()=>M(e,"apply",{thisArgument:t,argumentsList:r},n,i),i),v(o).delete("$length")}else s=M(e,"apply",{thisArgument:o,argumentsList:r},n,i);return s}function Gt(e,t,r=i=>i,n={}){return M(e,"setPrototypeOf",{proto:t},r,n)}function Ht(e,t=n=>n,r={}){return M(e,"preventExtensions",{},t,r)}function ye(e,t,r,n={}){let i=new AbortController;Pt.setMaxListeners?.(0,i.signal),n.signal&&n.signal.addEventListener("abort",()=>i.abort());let o={...n,signal:i.signal},s=q.getInstance(e,!0,o.namespace),a=new Map;return function f(u=[],c=null){let l,p,_;if(yt(t)){if(c){_=!0,p=c;for(let h of u)a.get(h.key)?.remove(),a.delete(h.key)}else p=s.addRegistration(t,f,o);l={signal:p.signal,childRegistrations:a}}else c?.remove(),p=s.addRegistration(t,f,o),l={signal:p.signal};if(o.childRegistrations&&o.keyInParent&&o.childRegistrations.set(o.keyInParent,p),arguments.length){let h=r(u,l);if(arguments.length>1)return h}return i}}function M(e,t,r={},n=o=>o,i={}){e=F(e),S(n)&&([i,n]=[n,f=>f]);function o(f,u){return arguments.length>1?n(u):n((Reflect[t]||Object[t])(e,...Object.values(r)))}let s=new P(e,{operation:t,...r}),a=N.getInstance(e,!1,i.namespace);return a?a.emit(s,o):o(s)}function yt(e){return e===1/0||Array.isArray(e)}function F(e,t=!0,r=!0){if((!e||!E(e))&&t)throw new Error(`Object must be of type object or array! "${it(e)}" given.`);return e instanceof P&&(e.type==="def"&&r?e=typeof e.value.get=="function"?e.value.get():e.value.value:e=e.value),e&&pt(e)}function Je(e,t,r,n={}){return t===1/0?n.level&&!E(e)?r([]):r(Object.entries(Object.getOwnPropertyDescriptors(e)).filter(([,i])=>i.writable!==!1&&!i.get&&!i.set).map(([i])=>i)):r(W(t,!1))}var Ye={...Qt,...zt},b=Ye;var Q=class{[Symbol.toStringTag]="LiveMode";constructor(t){Object.defineProperty(this,"runtime",{value:t});let r={statechange:()=>{b.defineProperty(this,"value",{value:t.flowControl.get("return")?.arg,enumerable:!0,configurable:!0})}};for(let n in r)t.on(n,r[n]),r[n]();t.$params.sourceType==="module"&&Object.defineProperty(this,"exports",{value:t.exports})}abort(){return this.runtime.abort(!0)}};var Xt=(e,...t)=>{let r=t.pop();if(e.constructor.name==="AsyncFunction")return A(e.call(...t),r);try{return r(e.call(...t))}catch(n){return r(void 0,n)}},A=(e,t)=>e instanceof Promise?e.then(t).catch(r=>t(void 0,r)):t(e),te=e=>typeof e=="object"&&e||typeof e=="function";function ge(e){let t=typeof e[e.length-1]=="object"?e.pop():{};return{source:e.pop()||"",args:e,params:t}}var xe={};function be(e,t=!1){return t?/^(["'])use live\1\s*(;|$)/.test(e):/(["'])use live\1\s*(;|$)/.test(e)}function we(e,t=0,r=null){let n=t,i=e.length,o=()=>{for(;n<i&&/\s/.test(e[n]);)n++},s=()=>{for(n+=2;n<i&&e[n]!==`
`&&e[n]!=="\r";)n++},a=()=>{for(n+=2;n<i&&!(e[n]==="*"&&e[n+1]==="/");)n++;n<i&&(n+=2)};for(;n<i;){if(o(),e[n]==="/"&&e[n+1]==="/"){s();continue}if(e[n]==="/"&&e[n+1]==="*"){a();continue}break}if(r===0)return e.slice(n);let f=n;if(n<i&&/[A-Za-z$_]/.test(e[n])){for(n++;n<i&&/[A-Za-z0-9$_]/.test(e[n]);)n++;return e.slice(f,n)}return r===1&&n<i?e[n]:null}function _e(...e){let t,r={runtimeParams:tr,transformerParams:Xe,parserParams:Qe};for(;t=e.shift();){let{runtimeParams:n={},transformerParams:{globalsNoObserve:i=[],globalsOnlyPathsExcept:o=[],...s}={},parserParams:a={}}=t;r={runtimeParams:{...r.runtimeParams,...n},transformerParams:{...r.transformerParams,globalsNoObserve:[...r.transformerParams.globalsNoObserve,...i],globalsOnlyPathsExcept:[...r.transformerParams.globalsOnlyPathsExcept,...o],...s},parserParams:{...r.parserParams,...a}},e.devMode}return r}var Qe={ecmaVersion:"latest",allowReturnOutsideFunction:!0,allowAwaitOutsideFunction:!1,allowSuperOutsideMethod:!1,preserveParens:!1,locations:!0},Xe={globalsNoObserve:["arguments","debugger"],globalsOnlyPathsExcept:[],originalSource:!0,locations:!0,compact:2},tr={apiVersion:3};var at={throwStmt(e){return{type:"ThrowStatement",argument:e}},tryStmt(e,t,r,n){return{type:"TryStatement",block:e,handler:t,finalizer:r,guardedHandlers:n}},catchClause(e,t){return{type:"CatchClause",param:e,body:t}},exprStmt(e){return{type:"ExpressionStatement",expression:e}},blockStmt(e){return{type:"BlockStatement",body:e}},labeledStmt(e,t){return{type:"LabeledStatement",label:e,body:t}},withStmt(e,t){return{type:"WithStatement",object:e,body:t}},ifStmt(e,t,r){return this.conditionalExpr(e,t,r,"IfStatement")},switchStmt(e,t,r=!1){return{type:"SwitchStatement",discriminant:e,cases:t}},switchCase(e,t){return{type:"SwitchCase",test:e,consequent:t}},whileStmt(e,t){return{type:"WhileStatement",test:e,body:t}},doWhileStmt(e,t){return{type:"DoWhileStatement",test:e,body:t}},forStmt(e,t,r,n){return{type:"ForStatement",init:e,test:t,update:r,body:n}},forInStmt(e,t,r){return{type:"ForInStatement",left:e,right:t,body:r}},forOfStmt(e,t,r){return{type:"ForOfStatement",left:e,right:t,body:r}},breakStmt(e=null){return{type:"BreakStatement",label:e}},continueStmt(e=null){return{type:"ContinueStatement",label:e}},returnStmt(e){return{type:"ReturnStatement",argument:e}},yieldExpr(e,t=!1){return{type:"YieldExpression",argument:e,delegate:t}},awaitExpr(e){return{type:"AwaitExpression",argument:e}},varDeclaration(e,t){return{type:"VariableDeclaration",kind:e,declarations:t}},varDeclarator(e,t=null){return{type:"VariableDeclarator",id:e,init:t}},funcDeclaration(e,t,r,n=!1,i=!1,o=!1){return this.func("FunctionDeclaration",...arguments)},sequenceExpr(e){return{type:"SequenceExpression",expressions:e}},parensExpr(e){return{type:"ParenthesizedExpression",expression:e}},logicalExpr(e,t,r){return{type:"LogicalExpression",operator:e,left:t,right:r}},binaryExpr(e,t,r){return{type:"BinaryExpression",operator:e,left:t,right:r}},unaryExpr(e,t,r=!0){return{type:"UnaryExpression",operator:e,argument:t,prefix:r}},updateExpr(e,t,r=!1){return{type:"UpdateExpression",operator:e,argument:t,prefix:r}},assignmentExpr(e,t,r="="){return{type:"AssignmentExpression",operator:r,left:e,right:t}},assignmentPattern(e,t){return{type:"AssignmentPattern",left:e,right:t}},thisExpr(){return{type:"ThisExpression"}},conditionalExpr(e,t,r,n="ConditionalExpression"){return{type:n,test:e,consequent:t,alternate:r}},arrayExpr(e){return{type:"ArrayExpression",elements:e}},arrayPattern(e){return{type:"ArrayPattern",elements:e}},objectExpr(e){return{type:"ObjectExpression",properties:e}},objectPattern(e){return{type:"ObjectPattern",properties:e}},chainExpr(e){return{type:"ChainExpression",expression:e}},callExpr(e,t,r=!1){return{type:"CallExpression",callee:e,arguments:t,optional:r}},newExpr(e,t){return{type:"NewExpression",callee:e,arguments:t}},taggedTemplateExpr(e,t){return{type:"TaggedTemplateExpression",tag:e,quasi:t}},memberExpr(e,t,r=!1,n=!1){return{type:"MemberExpression",object:e,property:t,computed:r,optional:n}},funcExpr(e,t,r,n=!1,i=!1,o=!1){return this.func("FunctionExpression",...arguments)},arrowFuncExpr(e,t,r,n=!1,i=!1,o=!1){return this.func("ArrowFunctionExpression",...arguments)},func(e,t,r,n,i=!1,o=!1,s=!1){return{type:e,id:t,params:r,body:n,async:i,expression:o,generator:s}},identifier(e){return{type:"Identifier",name:e}},property(e,t,r="init",n=!1,i=!1,o=!1){return{type:"Property",key:e,value:t,kind:r,shorthand:n,computed:i,method:o}},classDeclaration(e,t,r=null){return this.class("ClassDeclaration",...arguments)},classExpression(e,t,r=null){return this.class("ClassExpression",...arguments)},class(e,t,r,n=null){return{type:e,id:t,body:r,superClass:n}},methodDefinition(e,t,r="method",n=!1,i=!1){return{type:"MethodDefinition",key:e,value:t,kind:r,static:n,computed:i}},propertyDefinition(e,t,r=!1,n=!1){return{type:"PropertyDefinition",key:e,value:t,static:r,computed:n}},spreadElement(e){return{type:"SpreadElement",argument:e}},literal(e){if(typeof e=="object"&&!("name"in e)&&!("value"in e))throw new Error('Objects that convert to literals must have a "name" or "value" property.');return typeof e=="object"?{type:"Literal",get value(){return"name"in e?e.name:e.value}}:{type:"Literal",value:e}},templateLiteral(e,t){return{type:"TemplateLiteral",quasis:e,expressions:t}},comments(e){let t={};return Object.defineProperty(t,"toString",{value:()=>e}),Object.defineProperty(t,"trim",{value:function(){return this.toString()}}),[{type:"Line",value:t}]},withLoc(e,...t){return["start","end"].forEach(r=>{let n=r==="start"?t[0]:t[t.length-1];e[r]=n[r],n.loc&&(e.loc=e.loc||{},e.loc[r]=n.loc?.[r])}),e},invert(e){return this.unaryExpr("!",e)},clone(e){return e={...e},delete e.start,delete e.end,e}};var gt=Object.create(null);var X=class extends EventTarget{managedAlways=new Set;managedOnce=new Set;constructor(){super(),xe.setMaxListeners?.(0,this)}fire(t){return this.dispatchEvent(new Event(t,{cancelable:!0}))}on(...t){return this.addEventListener(...t),()=>this.removeEventListener(...t)}abort(t=!1){this.managedAlways.forEach(r=>r.abort?r.abort(t):r(t)),this.managedOnce.forEach(r=>r.abort?r.abort(t):r(t)),this.managedOnce.clear(),this.fire("abort")}manage(t){this.managedAlways.add(t)}once(t){this.managedOnce.add(t)}};var tt=class extends X{subscribers=new Set;signals=new Map;constructor(t,r,n){super(),this.context=t,this.context?.once(()=>this.abort()),this.once(()=>this.watchMode(!1)),this.type=r,this.state=n}get name(){return[...this.context?.signals.keys()||[]].find(t=>this.context.signals.get(t)===this)}signal(t,r="prop"){let n=this.signals.get(t);return n||(n=new tt(this,r,r==="object"?t:te(this.state)?b.get(this.state,t):void 0),this.signals.set(t,n),this.signals.size===1&&this.watchMode(),n.once(()=>{this.signals.delete(t),this.signals.size||this.watchMode(!1)})),n}subscribe(t){this.subscribers.add(t),t.once(()=>{this.subscribers.delete(t),this.subscribers.size||this.abort()})}watchMode(t=!0){this.mutationsWatch?.abort(),!(!t||!this.signals.size||!te(this.state))&&(this.mutationsWatch=b.observe(this.state,r=>{let n={map:new Map,add(o,s,a){for(let f of o){if(f.runtime.thread.includes(f)){a.subscribers.delete(f);continue}f.spec.beforeSchedule?.(s)!==!1&&(this.map.has(f.runtime)||this.map.set(f.runtime,new Set),this.map.get(f.runtime).add(f))}}};for(let o of r){let s=this.signals.get(o.key);!s||(n.add(s.subscribers,o,s),s.refresh(o.value))}let i=n.map.size?[...n.map].sort((o,s)=>o[0].$serial>s[0].$serial?1:-1):n.map;for(let[o,s]of i)o.state!=="aborted"&&o.schedule(...s)},{recursions:"force-sync"}))}refresh(t){this.state=t;for(let[r,n]of this.signals)n.refresh(b.get(this.state??{},r));this.watchMode()}};var k=class extends tt{symbols=new Map;constructor(t,r,n=void 0){super(t,r,n||Object.create(null))}};var I=class extends X{state;constructor(t,r,n,i,o,s){super(),t?.once(this),this.context=t,this.type=r,this.spec=n||{},this.scope=o,t?.scope!==o&&this.manage(o),this.serial=i,s&&(this.closure=s),t?.type==="iteration"?this.path=t.path.concat(this.spec.index):t?.type==="round"?this.path=t.path.concat(this.serial):this.path=(t?.path||[]).slice(0,-1).concat(this.serial),this.flowControl=new Map}get runtime(){return this.context.runtime}contains(t){return this===t.context||t.context&&this.contains(t.context)}order(t){if(!t)return this;let[r,n]=t.path.length<this.path.length?[t,this]:[this,t];return r.path.reduce((i,o,s)=>i&&o<=n.path[s],!0)&&r||n}beforeExecute(){this.state="running";let t=this.flowControl;return this.flowControl=new Map,t}execute(t=null){return this.runtime.thread.unshift(this),A(this.beforeExecute(),r=>Xt(this.closure,this,this,(n,i)=>i?this.throw(i,[this.serial,this.context?.serial],i.code):(this.spec.complete&&(n=this.spec.complete(n,this)),this.afterExecute(r),this.runtime.thread.shift(),t?t(n,this):n)))}throw(t,r,n){if(this.type==="function"&&["HandlerFunction","FinalizerFunction"].includes(this.$params.executionMode))return this.$params.lexicalContext.throw(t,r,n);if(this.spec.handler)return this.spec.handler(t);if(this.type!=="function"&&this.context)return this.context.throw(t,r,n);if(t.cause)throw t;let i=`${t.message||t}`,o=n!==null?`[${n}]: ${i}`:i,s=r.map(c=>c!==-1&&this.extractSource(c,!0)).filter(c=>c);s.push({source:this.runtime.$params.originalSource});let a=globalThis[t.name],f=new(a||Error)(o,{cause:s}),u=this.runtime.$params.sourceType==="module"&&this.$params.experimentalFeatures!==!1&&this.$params.exportNamespace||this.$params.fileName;throw u&&(f.fileName=u),n&&(f.code=n),f}afterExecute(t){this.state="complete";let r=this.flowControl;this.spec.finalizer&&this.spec.finalizer(),this.handleDownstream(r.size,t.size),this.handleRightstream(r.size,t.size);for(let n of["break","continue","return"])r.has(n)&&!r.get(n).endpoint?this.hoistFlowControl(n,r.get(n).arg):t.has(n)&&!t.get(n).endpoint&&this.hoistFlowControl(n,t.get(n).arg,!0)}typed(t,r,n=void 0){let i=Array.isArray(r)?"array":r===null?"null":typeof r;if(i===t||t==="iterable"&&r?.[Symbol.iterator]||t==="desctructurable"&&!["undefined","null"].includes(i))return r;throw t==="iterable"?new Error("value is not iterable."):t==="desctructurable"?new Error((n?`Cannot access ${n}; `:"")+"object not desctructurable."):new Error(`value must be of type ${t}.`)}let(t,r,n,i={}){return this.var(t,r,n,{...i,kind:"let"})}const(t,r,n,i={}){return this.var(t,r,n,{...i,kind:"const"})}var(t,r,n,i={}){i={kind:"var",...i},n||(n=()=>{});let o=i.restOf?(...a)=>{try{return n(...a)}catch(f){throw new Error(`Cannot declare ${t}; ${f.message}`)}}:n,s=(a,f)=>{let u=f.scope;if(i.kind==="var")for(;!["module","function"].includes(u.type)&&!b.has(u.state,t)&&u.context;)u=u.context;else u.type==="this"&&u.context&&(u=u.context);let c=u.symbols.get(t);if(c&&(c.kind!==i.kind||i.kind==="let"&&c.serial!==r))throw new Error(`Identifier "${t}" has already been declared.`);c?.reader?.abort(),c={serial:r,kind:i.kind};let l=a;return i.restOf&&(i.type==="array"?l=[]:l={},c.reader=b.map(a,l,{except:i.restOf,spread:i.type==="array"}),f.once(c.reader)),u.symbols.set(t,c),b.set(u.state,t,l),l};return this.autorun(i.kind,{complete:s,...i},r,o)}update(t,r,n={}){let i=this.scope;for(;i&&!b.has(i.state,t);)i=i.context;if(!i)throw new ReferenceError(`${t} is not defined.`);let o=i.symbols.get(t);if(o?.kind==="const")throw new ReferenceError(`Assignment to constant variable "${t}".`);let s=b.get(i.state,t),a=n.restOf?(...f)=>{try{return r(...f)}catch(u){throw new Error(`Cannot update ${t}; ${u.message}`)}}:r;return Xt(a,void 0,s,(f,u)=>{if(u)return this.throw(u,[this.serial]);o?.reader?.abort();let c=f;return n.restOf&&(o=o||{},n.type==="array"?c=[]:c={},o.reader=b.map(f,c,{except:n.restOf,spread:n.type==="array"}),this.once(o.reader)),(this.spec.static||this.type==="function"&&this.$params?.executionMode==="RegularFunction"?Reflect:b).set(i.state,t,c),["postinc","postdec"].includes(n.kind)?s:c})}ref(t,...r){let n=0,i={};typeof r[0]=="number"?(n=r.shift(),i=r.shift()||{}):typeof r[0]=="object"&&(i=r.shift());let o=this.scope;for(;o&&!b.has(o.state,t);)o=o.context;if(!o){if(i.isTypeCheck)return;throw new Error(`${t} is not defined.`)}let s=o.symbols.get(t)?.kind,a=o.signal(t,s);return i.typed&&this.typed(i.typed,a.state,t),this.autobind(a,n,i)}obj(t,...r){let n=0,i={};return typeof r[0]=="number"?(n=r.shift(),i=r.shift()||{}):typeof r[0]=="object"&&(i=r.shift()),this.autobind(this.runtime.$objects.signal(t,"object"),n,i)}autobind(t,r,n){let i=["LiveProgram","LiveFunction"].includes(this.runtime.$params.executionMode),o=t.type==="const",s=this===this.runtime,a=this.state==="aborted",f=this.spec.static,u=this.spec.isWrite,c=this;return function l(p,_={},h){if(i&&!f&&!u&&!n?.isLeft&&!o&&!s&&!a&&p.subscribe(c),!h||!p.state||typeof p.state!="object"){let x=p.state;return typeof p.state=="function"&&!/^class\s?/.test(Function.prototype.toString.call(p.state))&&(x=b.proxy(p.state,{..._,membrane:p})),x}if(!i||f)return p.state;let w;return b.proxy(p.state,_,x=>({...x,get(d,y,m=null){if(w)return x.get(d,y,m);w=!0;let $={..._};return Array.isArray(d)&&($.arrayMethodName=y),l(p.signal(y),$,h-1)}}))}(t,{},r)}autorun(t,...r){let n=r.pop(),i=r.pop(),o=r.pop()||{},s=I,a=this.scope;if(t==="iteration"){let u=this.runtime.constructor;s=n.constructor.name==="AsyncFunction"?u.AutoAsyncIterator:u.AutoIterator}["block","switch","iteration"].includes(t)&&(a=new k(a,t));let f=new s(this,t,o,i,a,n);if(t==="downstream"){if(this.downstream=f,this.flowControlApplied())return}else if(this.type==="switch"&&this.breakpoint)return;return f.execute()}function(t,r,n,i){if(r==="Declaration"){let s=this.scope.type==="this"?this.scope.context:this.scope;b.set(s.state,i.name,i)}let o=this;return Object.defineProperty(i,"toString",{value:function(s=!1){if(s&&t==="LiveFunction")return Function.prototype.toString.call(i);let a=o.runtime.extractSource(n);return a.startsWith("static ")?a.replace("static ",""):a}}),i}class(t,r,n){if(t==="Declaration"){let i=this.scope.type==="this"?this.scope.context:this.scope;b.set(this.scope.state,r.name,r)}return n.forEach(({name:i,isLiveFunction:o,static:s,serial:a})=>{this.function(o&&"LiveFunction"||"RegularFunction","Expression",a,s?r[i]:r.prototype[i])}),r}async import(...t){return this.runtime.import(...t)}async export(...t){return this.runtime.export(...t)}continue(t){return this.applyFlowControl("continue",t)}break(t){return this.applyFlowControl("break",t)}return(t){return this.applyFlowControl("return",t)}applyFlowControl(t,r,n=!1){let i=this.flowControl.size;if(n?this.flowControl.delete(t):this.flowControl.set(t,{arg:r}),this.type==="round"&&(this.context.breakpoint=this),this.type==="round"&&["break","continue"].includes(t)&&r===this.context?.spec.label){n||(this.flowControl.get(t).endpoint=!0),this.state!=="running"&&this.handleRightstream(this.flowControl.size,i);return}if(this.context?.type==="switch"&&t==="break"&&!r){n||(this.flowControl.get(t).endpoint=!0),this.context.breakpoint=this;return}this.state!=="running"&&(this.handleDownstream(this.flowControl.size,i),this.hoistFlowControl(...arguments))}hoistFlowControl(...t){return this.context?.applyFlowControl(...t)}flowControlApplied(t,r){return arguments.length?arguments.length===1?this.flowControl.has(t):this.flowControl.get(t)?.arg===r:this.flowControl.size||!1}handleDownstream(t,r){let n;!["block"].includes(this.type)||!(n=this.context?.downstream)||(t?n.abort():r&&(n.state="resuming",this.runtime.schedule(n)))}handleRightstream(t,r){if(this.type!=="round")return;let n=this,i=new Set;for(;n=n.nextRound;)t?n.abort():r&&n.state!=="inert"&&(n.state="resuming",i.add(n));i.size&&this.runtime.schedule(...i),!t&&r&&this.runtime.on("reflection",()=>{this.context.iterating||this.context.iterate()},{once:!0})}abort(t=!1){return t&&(this.context?.breakpoint===this&&delete this.context.breakpoint,this.flowControl.clear()),this.state=t?"inert":"aborted",super.abort(t)}};var et=class extends I{rounds=new Map;constructor(t,r,n,i,o,s){n.$closure=s,super(t,r,n,i,o),this.manage(()=>{delete this.breakpoint,this.rounds.clear()})}pseudorun(t){return this.runtime.iThread.unshift(this),A(t(),r=>(this.runtime.iThread.pop(),r))}createIterator(){return this.spec.kind==="for-in"?function*(){for(let t in this.iteratee)yield t}.call(this):this.spec.kind==="for-of"?function*(){for(let t of this.iteratee)yield t}.call(this):{next:()=>({done:!this.pseudorun(()=>this.spec.test(this))})}}closure(){["for-of","for-in"].includes(this.spec.kind)?([this.production,this.iteratee]=this.spec.parameters(this),this.iterator=this.createIterator(),this.iterator.original=!0,this.watchMode()):(this.spec.kind==="for"&&this.spec.init(this),this.iterator=this.createIterator()),this.iterate()}terminated(){return this.breakpoint&&!this.breakpoint.flowControlApplied("continue",this.spec.label)&&this.breakpoint.flowControlApplied()}advance(){this.spec.kind==="for"&&this.pseudorun(()=>this.spec.advance(this))}iterate(){this.iterating=!0;let t=()=>!this.terminated()&&!(this.cursor=this.iterator.next()).done,r=()=>{this.createRound(this.cursor.value).execute(),this.advance()};if(this.spec.kind==="do-while")do r();while(t());else for(;t();)r();this.iterating=!1}createRound(t){let r=this.rounds.size,n={index:r},i=["for-in","for-of"].includes(this.spec.kind)?{[this.production]:t}:{...this.scope.state},o=new k(this.scope,"round",i);this.scope.symbols.forEach((f,u)=>{o.symbols.set(u,f)});let s=new I(this,"round",n,this.serial,o,this.spec.$closure),a=this.spec.kind==="for-in"?t:r;return this.rounds.set(a,s),this.lastRound&&(this.lastRound.nextRound=s,s.prevRound=this.lastRound),this.lastRound=s,s}watchMode(){if(this.spec.static)return;let t=(r,n)=>{let i=new Set,o=new Set;for(let s of r){if(Array.isArray(this.iteratee)&&s.key==="length")continue;let a=this.spec.kind==="for-in"?s.key:s.value,f=this.spec.kind==="for-in"?s.key:parseInt(s.key),u=this.rounds.get(f);if(u)b.set(u.scope.state,this.production,a),s.type==="delete"&&(this.rounds.set(f,void 0),u.prevRound&&(u.prevRound.nextRound=u.nextRound),u.nextRound&&(u.nextRound.prevRound=u.prevRound),i.add(u));else if(s.type!=="delete"&&!s.isUpdate){if(this.spec.kind==="for-of"&&this.iterator.original&&!n.done)continue;o.add(a)}}this.runtime.on("reflection",()=>{i.forEach(s=>s.abort(!0))},{once:!0}),o.size&&(this.iterator=function*(s){yield*s,yield*o}(this.iterator),n.done&&this.iterate())};this.once(b.observe(this.iteratee,r=>{A(this.cursor,n=>t(r,n))}))}};var xt=class extends et{async createIterator(){return this.spec.kind==="for-in"?function*(){for(let t in this.iteratee)yield t}.call(this):this.spec.kind==="for-of"?function*(){for(let t of this.iteratee)yield t}.call(this):{next:async()=>({done:!await this.pseudorun(()=>this.spec.test(this))})}}async closure(){["for-of","for-in"].includes(this.spec.kind)?([this.production,this.iteratee]=await this.spec.parameters(this),this.iterator=await this.createIterator(),this.iterator.original=!0,this.watchMode()):(this.spec.kind==="for"&&await this.spec.init(this),this.iterator=await this.createIterator()),await this.iterate()}async iterate(){let t;this.iterating=!0;let r=async()=>!this.terminated()&&(this.cursor=this.iterator.next())&&(t=await this.cursor)&&!t.done,n=async()=>{await this.createRound(t.value).execute(),await this.advance()};if(this.spec.kind==="do-while")do await n();while(await r());else for(;await r();)await n();this.iterating=!1}};var rt=class extends I{locations=[];queue=new Set;thread=[];iThread=[];constructor(t,r,n,i,o){let{$serial:s=0,spec:a,...f}=n;super(t,r,a,-1,i,o),this.$serial=s,this.$params=f,this.$objects=new k(void 0,"objects"),this.manage(this.$objects),this.exports=Object.create(null),this.$promises={imports:[],exports:[]},this.manage(()=>{b.deleteProperties(this.exports,Object.keys(this.exports)),this.$promises.imports.splice(0),this.$promises.exports.splice(0)})}extractSource(t,r=!1){let[[n,i,o],[s]]=this.locations[t],a=this.$params.originalSource.slice(n,s);return r?{expr:a,line:i,column:o}:a}get runtime(){return this}get nowRunning(){return this.thread[0]}schedule(...t){let r=this.queue.size;for(let n of t)this.queue.add(n);if(!r)return this.flowControlDirty=!1,function n(i,o){let s;for(let a of this.queue){if(o&&o.order(a)!==o||["aborted","running"].includes(a.state)||this.iThread[0]?.contains(a)){this.queue.delete(a);continue}s=s?s.order(a):a,o||(o=s)}return s?(s.abort(),s.execute(a=>(this.queue.delete(s),n.call(this,a,s)))):(this.fire("reflection"),this.flowControlApplied()&&this.fire("statechange"),i)}.call(this,void 0,this.nowRunning)}execute(t=null){return super.execute(r=>{let n=["LiveProgram","LiveFunction"].includes(this.$params.executionMode),i=this.$params.sourceType==="module"||this.$params.sourceType==="script",o=n||i?new Q(this):this.flowControl.get("return")?.arg;return t?t(o,this):o})}spawn(t,r,n,i=null){let o=this.nowRunning||i||this,s={...this.$params,$serial:this.$serial+1,executionMode:t,lexicalContext:i},a=new k(o.scope,"function",{this:r});return new this.constructor(o,"function",s,a,n).execute()}async import(...t){let r=t.pop(),n=typeof r=="string"?{source:r}:r,i=s=>{if(n.forExport||n.isDynamic)return s;this.assignModules(t,this.scope.state,s,r.serial)};if(this.$params.experimentalFeatures!==!1&&gt[n.source])return i(gt[n.source]);let o=(async()=>{let s=this.$params.sourceType==="module"&&this.$params.experimentalFeatures!==!1&&this.$params.exportNamespace||this.$params.fileName;try{return i({...await import(n.source)})}catch(a){a.code==="ERR_MODULE_NOT_FOUND"?this.throw(new Error(`Cannot find module "${n.source}"${s?` imported at "${s}"`:""}.`),[n.serial],a.code):this.throw(a,[n.serial],a.code)}})();return n.isDynamic||this.$promises[n.forExport?"exports":"imports"].push(o),o}async export(...t){let r=Array.isArray(t[t.length-1])?null:t.pop(),n=r?await this.import({...r,forExport:!0}):this.scope.type==="this"?this.scope.context.state:this.scope.state;this.assignModules(t,this.exports,n,r?.serial)}assignModules(t,r,n,i=null){let o=[],s=["LiveProgram","LiveFunction"].includes(this.$params.executionMode);for(let[a,f,u,c]of t){if(a===null){(s?b:Reflect).set(r,u,c);continue}if(a==="*"&&u){(s?b:Reflect).set(r,u,n);continue}b.has(n,a)||this.throw(new Error(`The requested module does not provide an export named "${a}".`),[f,i]),(s?b:Reflect).set(r,u||a,b.get(n,a)),o.push([a,f,u])}!o.length||!s||this.once(b.observe(n,a=>{for(let[f,,u]of o)for(let c of a)f==="*"?b.set(r,c.key,c.value):c.key===f&&b.set(r,u||f,c.value)}))}afterExecute(...t){return this.$params.sourceType==="module"&&this.$params.experimentalFeatures!==!1&&this.$params.exportNamespace&&(gt[this.$params.exportNamespace]=this.exports,this.once(()=>{delete gt[this.$params.exportNamespace]})),super.afterExecute(...t)}};U(rt,"AutoAsyncIterator",xt),U(rt,"AutoIterator",et);function St(e,t,r,n=[],i={}){typeof n=="object"&&n&&!Array.isArray(n)&&(i=n,n=[]);let{liveMode:o=!0,thisContext:s,env:a,exportNamespace:f,fileName:u,base64:c,compileFunction:l,forDynamicBinding:p=!1,..._}=i,{parserParams:h,transformerParams:w,runtimeParams:x}=_e(_),d=/module/.test(e),y=/script/.test(e),m=/function/.test(e),$=/async/.test(e)||/module/.test(e),T=/source/.test(e),B=/file/.test(e),nt=typeof r=="object"&&r?.type==="Program",ft=r;if(d)h.sourceType="module",h.allowAwaitOutsideFunction=!0,h.executionMode=o?"LiveProgram":"RegularProgram";else if(y)h.executionMode=o?"LiveProgram":"RegularProgram";else if(m){if(T)if(nt)r=at.funcExpr(null,n.map(j=>at.identifier(j)),at.blockStmt(o?[at.literal("use live"),...r.body]:r.body),$),r.isLiveFunction=ft.isLiveProgram;else{let j="  "+r.split(`
`).join(`
  `);r=`${$?"async function":"function"}(${n.join(", ")}) {
${o?`  "use live";
`:""}${j}
}`}else nt&&(r=r.body[0]);nt?r={type:"Program",body:[at.returnStmt(r)],start:ft.start,end:ft.end,hasLiveFunctions:ft.hasLiveFunctions,originalSource:ft.originalSource}:r=`return ${r}`,h.executionMode="RegularProgram"}else throw new Error(`Unrecognized sourceType specified: "${e}".`);let ie=d?"module":y?"script":"function",Oe=d&&B&&c&&"export default async function(%0) {%1}";w.sourceType=ie,w.base64=Oe,x.sourceType=ie,x.fileName=u,d&&(x.exportNamespace=f);let oe=t.transform(r,{...h,...w,astResult:nt});function kt(j,O=!1){let g=j.join(`
`);return nt?A(t.parse(g,h),R=>(R.body.find(C=>C.type==="ExpressionStatement"&&C.expression?.type==="AssignmentExpression"&&C.expression.left.type==="MemberExpression"&&C.expression.left.object.type==="Identifier"&&C.expression.left.property.type==="Identifier"&&C.expression.left.property.name==="main"&&C.expression.right.type==="FunctionExpression").expression.right.body.body.push(...oe.transformedSource.body),O?A(R,C=>t.serialize(C)):R)):g}return A(oe,j=>{if(!j)return;let O=[],g=j.identifier2,R;if(B&&ee)O.push(`const { Scope, Runtime } = await import('${ee}/index.js');`),O.push(`const ${g} = { Scope, Runtime, params: { ...(${JSON.stringify(x)}), executionMode: '${j.isLiveProgram&&"LiveProgram"||"RegularProgram"}', originalSource: \`${j.originalSource.replace(/`/g,"\\`")}\`, }, };`);else{let K={Scope:k,Runtime:rt,params:{...x,originalSource:j.originalSource,executionMode:j.isLiveProgram&&"LiveProgram"||"RegularProgram"},thisContext:s,env:a};B?(globalThis.webqit||(globalThis.webqit={}),globalThis.webqit.UseLive||(globalThis.webqit.UseLive={}),globalThis.webqit.UseLive.Script||(globalThis.webqit.UseLive.Script=K),O.push(`const ${g} = globalThis.webqit.UseLive.Script;`)):R=K}O.push(`${g}.main = ${d?"async ":""}function(${j.identifier}) {${nt?"":`
  ${j.transformedSource.replace(/\n/g,`
  `)}
`}};`);let V="global";if(O.push(`${g}.scope = new ${g}.Scope(undefined, '${V}', globalThis);`),(y||R?.env||R&&p)&&(V="env",O.push(`${g}.scope = new ${g}.Scope(${g}.scope, '${V}', ${g}.env);`)),d&&(V="module",O.push(`${g}.scope = new ${g}.Scope(${g}.scope, '${V}');`)),(typeof R?.thisContext<"u"||R&&p)&&O.push(`${g}.scope = new ${g}.Scope(${g}.scope, 'this', { ['this']: ${g}.thisContext });`),O.push(`${g}.runtime = new ${g}.Runtime(undefined, '${V}', ${g}.params, ${g}.scope, ${g}.main);`),d&&B){O.push(`${g}.result = await ${g}.runtime.execute();`);let[K,ae]=j.exportIds.reduce(([,ue],Rt)=>Rt==="default"?[Rt,ue]:[,ue.concat(Rt)],[null,[]]);return ae.length&&O.push(`export const { ${ae.join(", ")} } = ${g}.result.exports;`),K&&O.push(`export default ${g}.result.exports.default;`),kt(O)}if(B)return O.push(`${g}.result = ${g}.runtime.execute();`),m&&O.push(`return ${g}.result;`),kt(O);O.push(m?`return ${g}.runtime.execute();`:`return ${g}.runtime;`);let C=kt(O,!0),se=l||Function;return A(C,K=>p?[se(g,K),R]:se(g,K)(R))})}var ee;try{ee=eval("import.meta.url")}catch(e){}function Ru(e){let t=er(e);return rr(t)}function er(e){if(typeof e!="string")throw new TypeError("URL must be a string");if(!e.startsWith("file://"))return e;let t=e.slice(7);return t=t.replace(/^\/([A-Za-z]:)/,"$1"),t=decodeURIComponent(t),t}function rr(e){if(typeof e!="string")throw new TypeError("path must be a string");let t=e.includes("\\")?"\\":"/",r=e.lastIndexOf(t);return r===-1?e:r===0?t:e.slice(0,r)}var ut=class{constructor(...t){let r=this.constructor,n=typeof t[t.length-1]=="object"?t.pop():{};this.source=t.pop()||"",this.$program=St(r.sourceType,r.astTools,this.source,{...n,forDynamicBinding:!0})}execute(){return A(this.$program,([t,r])=>A(t(r),n=>n.execute()))}bind(t,r=void 0){return A(this.$program,([n,i])=>n({...i,thisContext:t,env:r}))}toString(t=!1){return t?A(this.$program,([r])=>r+""):this.source}};var nr;function ir(...e){let{source:t,args:r,params:n}=ge(e),i=ve("async-function-source",t,r,n);if(!(i instanceof Promise))return i;let o=async function(...s){return(await i).call(this,...s)};return Object.defineProperty(o,"toString",{value:async function(...s){return(await i).toString(...s)}}),o}var or,bt=class extends ut{};U(bt,"sourceType","async-script-source"),U(bt,"astTools",{parse:At,transform:Tt,serialize:jt});var wt=class extends ut{};U(wt,"sourceType","module"),U(wt,"astTools",{parse:At,transform:Tt,serialize:jt});function ve(e,t,...r){return St(e,{parse:At,transform:Tt,serialize:jt},t,...r)}function At(e,t){return re("parse",e,t)}function Tt(e,t){return re("transform",e,t)}function jt(e,t){return re("serialize",e,t)}function re(e,t,r){let n=i=>(Object.defineProperty(i,"toString",{value:o=>o==="base64"?i.transformedSourceBase64:i.transformedSource}),i);if(globalThis.webqit?.$useLiveT){let{parse:i,transform:o,serialize:s}=globalThis.webqit.$useLiveT;if(e==="serialize")return s(t,r);if(e==="parse")return i(t,r);if(e==="transform"){let a=o(t,r);return n(a)}}if(globalThis.webqit=globalThis.webqit||{},!globalThis.webqit.$useLiveTWorker){let s=`
        const transformerUrls = [ '${(document.querySelector('meta[name="$q-transformer-url"]')?.content.split(",")||[]).concat("https://unpkg.com/@webqit/use-live/dist/transformer.js").join("','")}' ];
        ( function importScript() {
            try { importScripts( transformerUrls.shift().trim() ) } catch( e ) { if ( transformerUrls.length ) { importScript(); } }
        } )();
        const { parse, transform, serialize } = globalThis.webqit.$useLiveT;
        globalThis.onmessage = e => {
            const { action, input, params } = e.data;
            let result;
            if (action === 'serialize') {
                result = serialize(input, params);
            } else if (action === 'parse') {
                result = parse(input, params);
            } else if (action === 'transform') {
                const { toString, ...compilation } = transform(input, params);
                result = compilation;
            }
            e.ports[0]?.postMessage(result);
        };`;globalThis.webqit.$useLiveTWorker=new Worker(`data:text/javascript;base64,${btoa(s)}`)}return new Promise(i=>{let o=new MessageChannel;webqit.$useLiveTWorker.postMessage({action:e,input:t,params:r},[o.port2]),o.port1.onmessage=s=>{let a=s.data;e==="transform"&&n(a),i(a)}})}globalThis.webqit||(globalThis.webqit={});Object.assign(globalThis.webqit,ne);})();
//# sourceMappingURL=main.lite.js.map
